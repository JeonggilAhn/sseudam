#!/bin/sh

# rebase ì‘ì—…ì¸ì§€ í™•ì¸
if [ "$1" = "rebase" ]; then
    # ìµœì‹  ì»¤ë°‹ ë©”ì‹œì§€ ê°€ì ¸ì˜¤ê¸°
    commit_msg=$(git log -1 --pretty=%B)
    
    # ì´ë¯¸ ì´ëª¨ì§€ê°€ ìˆëŠ”ì§€ í™•ì¸
    if [[ ! "$commit_msg" =~ ^[[:space:]]*[[:punct:]].*$ ]]; then
        # prefix ì°¾ê¸°
        prefix=$(echo "$commit_msg" | grep -oE "^(feat|fix|docs|style|refactor|test|chore|hotfix)")
        
        if [ ! -z "$prefix" ]; then
            # ì´ëª¨ì§€ ë§¤í•‘
            case "$prefix" in
                "feat") emoji="âœ¨";;
                "fix") emoji="ğŸ›";;
                "docs") emoji="ğŸ“";;
                "style") emoji="ğŸ¨";;
                "refactor") emoji="â™»ï¸";;
                "test") emoji="â˜‘ï¸";;
                "chore") emoji="âš™ï¸";;
                "hotfix") emoji="ğŸ‘º";;
            esac
            
            # ìƒˆ ì»¤ë°‹ ë©”ì‹œì§€ë¡œ amend
            git commit --amend -m "$emoji $commit_msg"
        fi
    fi
fi 